<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=XGMkxXUZTA64h2imyzu79g);.lst-kix_xepqkeslidei-2>li:before{content:"\0025a0   "}ul.lst-kix_lr022gwzj6ae-2{list-style-type:none}ul.lst-kix_lr022gwzj6ae-1{list-style-type:none}ul.lst-kix_lr022gwzj6ae-4{list-style-type:none}ul.lst-kix_lr022gwzj6ae-3{list-style-type:none}ul.lst-kix_lr022gwzj6ae-6{list-style-type:none}ul.lst-kix_lr022gwzj6ae-5{list-style-type:none}.lst-kix_xepqkeslidei-3>li:before{content:"\0025cf   "}ul.lst-kix_lr022gwzj6ae-8{list-style-type:none}ul.lst-kix_lr022gwzj6ae-7{list-style-type:none}.lst-kix_xepqkeslidei-6>li:before{content:"\0025cf   "}.lst-kix_xepqkeslidei-4>li:before{content:"\0025cb   "}.lst-kix_xepqkeslidei-5>li:before{content:"\0025a0   "}ul.lst-kix_xepqkeslidei-0{list-style-type:none}.lst-kix_b7cefb7s1o0r-0>li:before{content:"\0025cf   "}.lst-kix_xepqkeslidei-0>li:before{content:"\0025cf   "}.lst-kix_xepqkeslidei-1>li:before{content:"\0025cb   "}ul.lst-kix_lr022gwzj6ae-0{list-style-type:none}.lst-kix_8e12xw2ihwhs-4>li:before{content:"\0025cb   "}.lst-kix_8e12xw2ihwhs-5>li:before{content:"\0025a0   "}.lst-kix_b7cefb7s1o0r-1>li:before{content:"\0025cb   "}.lst-kix_8e12xw2ihwhs-1>li:before{content:"\0025cb   "}.lst-kix_b7cefb7s1o0r-2>li:before{content:"\0025a0   "}.lst-kix_8e12xw2ihwhs-0>li:before{content:"\0025cf   "}.lst-kix_8e12xw2ihwhs-7>li:before{content:"\0025cb   "}.lst-kix_8e12xw2ihwhs-8>li:before{content:"\0025a0   "}.lst-kix_b7cefb7s1o0r-4>li:before{content:"\0025cb   "}.lst-kix_8e12xw2ihwhs-6>li:before{content:"\0025cf   "}.lst-kix_b7cefb7s1o0r-3>li:before{content:"\0025cf   "}.lst-kix_b7cefb7s1o0r-6>li:before{content:"\0025cf   "}.lst-kix_b7cefb7s1o0r-5>li:before{content:"\0025a0   "}.lst-kix_xepqkeslidei-7>li:before{content:"\0025cb   "}ul.lst-kix_8e12xw2ihwhs-8{list-style-type:none}ul.lst-kix_8e12xw2ihwhs-7{list-style-type:none}.lst-kix_b7cefb7s1o0r-8>li:before{content:"\0025a0   "}.lst-kix_xepqkeslidei-8>li:before{content:"\0025a0   "}.lst-kix_8e12xw2ihwhs-2>li:before{content:"\0025a0   "}ul.lst-kix_8e12xw2ihwhs-4{list-style-type:none}ul.lst-kix_8e12xw2ihwhs-3{list-style-type:none}.lst-kix_b7cefb7s1o0r-7>li:before{content:"\0025cb   "}.lst-kix_8e12xw2ihwhs-3>li:before{content:"\0025cf   "}ul.lst-kix_8e12xw2ihwhs-6{list-style-type:none}ul.lst-kix_8e12xw2ihwhs-5{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-1{list-style-type:none}ul.lst-kix_8e12xw2ihwhs-0{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-0{list-style-type:none}ul.lst-kix_8e12xw2ihwhs-2{list-style-type:none}ul.lst-kix_8e12xw2ihwhs-1{list-style-type:none}.lst-kix_lr022gwzj6ae-0>li:before{content:"\0025cf   "}.lst-kix_lr022gwzj6ae-1>li:before{content:"\0025cb   "}.lst-kix_lr022gwzj6ae-3>li:before{content:"\0025cf   "}ul.lst-kix_b7cefb7s1o0r-8{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-7{list-style-type:none}.lst-kix_lr022gwzj6ae-2>li:before{content:"\0025a0   "}.lst-kix_lr022gwzj6ae-4>li:before{content:"\0025cb   "}ul.lst-kix_b7cefb7s1o0r-6{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-5{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-4{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-3{list-style-type:none}ul.lst-kix_b7cefb7s1o0r-2{list-style-type:none}.lst-kix_lr022gwzj6ae-7>li:before{content:"\0025cb   "}.lst-kix_lr022gwzj6ae-6>li:before{content:"\0025cf   "}.lst-kix_lr022gwzj6ae-8>li:before{content:"\0025a0   "}.lst-kix_lr022gwzj6ae-5>li:before{content:"\0025a0   "}ul.lst-kix_xepqkeslidei-4{list-style-type:none}ul.lst-kix_xepqkeslidei-3{list-style-type:none}ul.lst-kix_xepqkeslidei-2{list-style-type:none}ul.lst-kix_xepqkeslidei-1{list-style-type:none}ul.lst-kix_xepqkeslidei-8{list-style-type:none}ul.lst-kix_xepqkeslidei-7{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ul.lst-kix_xepqkeslidei-6{list-style-type:none}ul.lst-kix_xepqkeslidei-5{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c15{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:135.8pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:97.5pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:0pt;width:61.5pt;border-top-color:#000000;border-bottom-style:solid}.c27{color:#f1fa8c;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c1{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c22{color:#000000;text-decoration:none;vertical-align:baseline;font-size:23pt;font-family:"Arial";font-style:normal}.c8{padding-top:18pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c30{padding-top:24pt;padding-bottom:6pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c4{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c19{color:#000000;text-decoration:none;vertical-align:baseline;font-size:17pt;font-family:"Arial";font-style:normal}.c6{padding-top:14pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c21{padding-top:12pt;padding-bottom:2pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c12{color:#000000;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Arial";font-style:normal}.c18{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:italic}.c5{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c28{color:#434343;text-decoration:none;vertical-align:baseline;font-size:14pt;font-style:normal}.c24{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c29{border-spacing:0;border-collapse:collapse;margin-right:auto}.c0{color:#188038;font-weight:400;font-family:"Roboto Mono"}.c20{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c16{margin-left:36pt;padding-left:0pt}.c13{font-weight:400;font-family:"Arial"}.c9{padding:0;margin:0}.c2{font-weight:400;font-family:"Roboto Mono"}.c25{color:#000000;font-size:11pt}.c23{color:#000000;font-size:13pt}.c26{font-size:13pt}.c11{height:11pt}.c17{height:26.5pt}.c10{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c20 doc-content"><h1 class="c30" id="h.gjwkqz1gqpb"><span class="c10 c22">Middleware/authMiddleware</span></h1><p class="c4"><span class="c10">Vers&atilde;o:</span><span>&nbsp;1.0<br> </span><span class="c10">&Uacute;ltima atualiza&ccedil;&atilde;o:</span><span>&nbsp;25 de agosto de 2025<br> </span><span class="c10">Respons&aacute;vel:</span><span class="c5 c13">&nbsp;Ariel Spencer & Fabrício Bahiense</span></p><hr><p class="c3 c11"><span class="c5 c13"></span></p><h2 class="c8" id="h.z4rab9ko9wgz"><span class="c19 c10">&#128203; Descri&ccedil;&atilde;o</span></h2><h3 class="c6" id="h.leigzxc205g4"><span class="c12 c10">O que faz?</span></h3><p class="c4"><span class="c5 c13">Faz a autentica&ccedil;&atilde;o de usu&aacute;rios administradores e outros gerais, caso as credenciais/token sejam v&aacute;lidos, permite dar continuidade na fun&ccedil;&atilde;o. </span></p><h3 class="c6" id="h.3svhyg1mpsp9"><span class="c10 c12">Por que existe?</span></h3><p class="c4"><span class="c5 c13">Serve para garantir que pessoas n&atilde;o autorizadas n&atilde;o tenham acesso ao sistema e manter um n&iacute;vel hier&aacute;rquico adequado.</span></p><h3 class="c6" id="h.cyzqya8eyppg"><span class="c12 c10">Como funciona?</span></h3><p class="c4"><span class="c5 c13">Pega o token que fica no header, checa o seu id e sua role para verificar seu n&iacute;vel hier&aacute;rquico, caso seja v&aacute;lido segue para a pr&oacute;xima fun&ccedil;&atilde;o. </span></p><hr><p class="c3 c11"><span class="c5 c13"></span></p><h2 class="c8" id="h.ntvgs5x9ga0i"><span class="c19 c10">&#128295; Documenta&ccedil;&atilde;o T&eacute;cnica</span></h2><h3 class="c6" id="h.1dyzapnlsjuv"><span class="c12 c10">Arquitetura</span></h3><p class="c3"><span class="c26 c10">&#60419;</span><span class="c0">[Diagrama</span><span class="c2">&nbsp;</span><span class="c0">simples</span><span class="c2">&nbsp;</span><span class="c0">ou</span><span class="c2">&nbsp;</span><span class="c0">descri&ccedil;&atilde;o</span><span class="c2">&nbsp;</span><span class="c0">da</span><span class="c2">&nbsp;</span><span class="c0">arquitetura]</span></p><p class="c3"><span class="c0">Frontend</span><span class="c2">&nbsp;</span><span class="c0">(Nuxt)</span><span class="c2">&nbsp;</span><span class="c0">&harr;</span><span class="c2">&nbsp;</span><span class="c0">Backend</span><span class="c2">&nbsp;</span><span class="c0">(Node)</span><span class="c2">&nbsp;</span><span class="c0">&harr;</span><span class="c2">&nbsp;</span><span class="c0">Database</span><span class="c2">&nbsp;</span><span class="c0">(MongoDB)</span></p><h3 class="c6" id="h.8gtf4yonz4kv"><span class="c25">&#60418;</span><span class="c10 c23">Tecnologias Utilizadas</span></h3><ul class="c9 lst-kix_lr022gwzj6ae-0 start"><li class="c4 c16 li-bullet-0"><span class="c10">Banco:</span><span class="c5 c13">&nbsp;Mongoose</span></li><li class="c4 c16 li-bullet-0"><span class="c10">Outros:</span><span class="c5 c13">&nbsp;JSON Web Token</span></li></ul><h3 class="c6" id="h.qy5hssy6e7gs"><span class="c12 c10">Estrutura de Pastas</span></h3><p class="c3"><span class="c10 c26">&#60419;</span><span class="c0">backend/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Projeto</span></p><p class="c3"><span class="c0">&#9492;&#9472;&#9472;</span><span class="c2">&nbsp;</span><span class="c0">src/</span><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c0"># Source</span></p><p class="c3"><span class="c24 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&#9472; middleware/ </span></p><p class="c3"><span class="c0 c24">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#9492;&#9472;&#9472; authMiddleware.ts</span></p><h3 class="c6" id="h.weujkynm7ur5"><span class="c25">&#60418;</span><span class="c12 c10">Configura&ccedil;&atilde;o</span></h3><h4 class="c21" id="h.l83smc8gsedn"><span class="c1">Vari&aacute;veis de Ambiente</span></h4><p class="c3"><span class="c10">&#60419;</span><span class="c0">#</span><span class="c2">&nbsp;</span><span class="c0">Essenciais</span></p><p class="c3"><span class="c0">NODE_ENV=development</span></p><p class="c3"><span class="c0">PORT=3000</span></p><p class="c3"><span class="c0">DATABASE_URL=mongodb://...</span></p><p class="c3 c11"><span class="c5 c2"></span></p><p class="c3"><span class="c0">#</span><span class="c2">&nbsp;</span><span class="c0">Espec&iacute;ficas</span><span class="c2">&nbsp;</span><span class="c0">do</span><span class="c2">&nbsp;</span><span class="c0">m&oacute;dulo</span></p><p class="c3"><span class="c0">[VARIAVEL_1]=[valor]</span></p><p class="c3"><span class="c0">[VARIAVEL_2]=[valor]</span></p><h4 class="c21" id="h.kp2pu71obioy"><span class="c25">&#60418;</span><span class="c1">Como rodar</span></h4><p class="c3"><span class="c10">&#60419;</span><span class="c0">#</span><span class="c2">&nbsp;</span><span class="c0">Instalar</span><span class="c2">&nbsp;</span><span class="c0">depend&ecirc;ncias</span></p><p class="c3"><span class="c0">npm</span><span class="c2">&nbsp;</span><span class="c0">install</span></p><p class="c3 c11"><span class="c5 c2"></span></p><p class="c3"><span class="c0">#</span><span class="c2">&nbsp;</span><span class="c0">Desenvolvimento</span></p><p class="c3"><span class="c0">npm</span><span class="c2">&nbsp;</span><span class="c0">run</span><span class="c2">&nbsp;</span><span class="c0">dev</span></p><p class="c3 c11"><span class="c5 c2"></span></p><p class="c3"><span class="c0">#</span><span class="c2">&nbsp;</span><span class="c0">Produ&ccedil;&atilde;o</span></p><p class="c3"><span class="c0">npm</span><span class="c2">&nbsp;</span><span class="c0">run</span><span class="c2">&nbsp;</span><span class="c0">build</span></p><p class="c3"><span class="c0">npm</span><span class="c2">&nbsp;</span><span class="c0">start</span></p><h3 class="c6" id="h.kuwui85s5px3"><span class="c25">&#60418;</span><span class="c12 c10">Endpoints/Rotas Principais</span></h3><h4 class="c21" id="h.9kay6ctxa6ww"><span class="c1">Frontend (Nuxt)</span></h4><ul class="c9 lst-kix_b7cefb7s1o0r-0 start"><li class="c4 c16 li-bullet-0"><span class="c0">/</span><span class="c5 c13">&nbsp;- P&aacute;gina inicial</span></li><li class="c4 c16 li-bullet-0"><span class="c0">/[rota]</span><span class="c5 c13">&nbsp;- [Descri&ccedil;&atilde;o]</span></li></ul><h4 class="c21" id="h.pqtu99uptsb6"><span class="c1">Backend (API)</span></h4><ul class="c9 lst-kix_xepqkeslidei-0 start"><li class="c4 c16 li-bullet-0"><span class="c0">GET /api/[recurso]</span><span class="c5 c13">&nbsp;- [Descri&ccedil;&atilde;o]</span></li><li class="c4 c16 li-bullet-0"><span class="c0">POST /api/[recurso]</span><span class="c5 c13">&nbsp;- [Descri&ccedil;&atilde;o]</span></li><li class="c4 c16 li-bullet-0"><span class="c0">PUT /api/[recurso]/:id</span><span class="c5 c13">&nbsp;- [Descri&ccedil;&atilde;o]</span></li><li class="c4 c16 li-bullet-0"><span class="c0">DELETE /api/[recurso]/:id</span><span class="c5 c13">&nbsp;- [Descri&ccedil;&atilde;o]</span></li></ul><h3 class="c6" id="h.56d6nossyfti"><span class="c12 c10">Banco de Dados</span></h3><h4 class="c21" id="h.tt8hmrjblcq"><span class="c1">Collections/Tabelas</span></h4><p class="c3"><span class="c10">&#60419;</span><span class="c0">//</span><span class="c2">&nbsp;</span><span class="c0">[nome_da_collection]</span></p><p class="c3"><span class="c0">{</span></p><p class="c3"><span class="c2">&nbsp; </span><span class="c0">_id:</span><span class="c2">&nbsp;</span><span class="c0">ObjectId,</span></p><p class="c3"><span class="c2">&nbsp; </span><span class="c0">campo1:</span><span class="c2">&nbsp;</span><span class="c0">String,</span></p><p class="c3"><span class="c2">&nbsp; </span><span class="c0">campo2:</span><span class="c2">&nbsp;</span><span class="c0">Number,</span></p><p class="c3"><span class="c2">&nbsp; </span><span class="c0">created_at:</span><span class="c2">&nbsp;</span><span class="c0">Date,</span></p><p class="c3"><span class="c2">&nbsp; </span><span class="c0">updated_at:</span><span class="c2">&nbsp;</span><span class="c0">Date</span></p><p class="c3"><span class="c0">}</span></p><p class="c3"><span>&#60418;</span><hr></p><h2 class="c8" id="h.g8pknzwedoil"><span class="c10 c19">&#128230; Depend&ecirc;ncias</span></h2><h3 class="c6" id="h.2ueeifispol6"><span class="c12 c10">Depend&ecirc;ncias Principais</span></h3><table class="c29"><thead><tr class="c17"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c10">Pacote</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c10">Vers&atilde;o</span></p></td><td class="c15" colspan="1" rowspan="1"><p class="c3"><span class="c10">Finalidade</span></p></td></tr><tr class="c17"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c5 c13">mongoose</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span>^5.11.97</span></p></td><td class="c15" colspan="1" rowspan="1"><p class="c3"><span class="c5 c13">Banco de dados</span></p></td></tr><tr class="c17"><td class="c14" colspan="1" rowspan="1"><p class="c3"><span class="c5 c13">jsonwebtoken</span></p></td><td class="c7" colspan="1" rowspan="1"><p class="c3"><span class="c5 c13">^9.0.6</span></p></td><td class="c15" colspan="1" rowspan="1"><p class="c3"><span class="c5 c13">Decodifica&ccedil;&atilde;o do token</span></p></td></tr></thead></table><hr><p class="c3 c11"><span class="c5 c13"></span></p><p class="c4"><span class="c13 c18">&Uacute;ltima revis&atilde;o: 25 de agosto de 2025 por Ariel Spencer & Fabrício Bahiense</span></p></body></html>